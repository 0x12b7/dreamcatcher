function n(n){if(null==n||"object"!=typeof n)return String(n);try{return JSON.stringify(n)}catch{}return"[object Object]"}function r(n){return w((()=>structuredClone(n))).mapErr((n=>n.parse((n=>null!=n&&"object"==typeof n&&"name"in n&&"code"in n&&"message"in n&&"string"==typeof n.name&&"number"==typeof n.code&&"string"==typeof n.message)).map((n=>d(n))).unwrapOr(d())))}function t(n){return{inspect:r,parse:function(n){return n(r())?_(r()):y}};function r(){return n}}var e,u,o,a,c;function i(n,r,t,...e){let u,o;{u=new Map,o=0n;let c=0n;for(;c<t;){let r=a();u.set(r,n(...e)),c++}return function(...t){let e,o;return e=y,o=function(){let n=u.keys().toArray().at(0);return n?_(n):y}().toResult(void 0).map((n=>(e=_(n),l(function(n){let r=u.get(n);return u.delete(n),r}(n),{deAlloc:c})))).recover((()=>(e=_(a()),l(n(...t),{deAlloc:c})))).unwrap();function c(){return e.toResult(void 0).map((n=>{e=y,function(n,r){u.set(n,r)}(n,r(o.expect("Dyn: Could not deallocate resource but the key was available."+M)))})),o=f({deAlloc:c})}}}function a(){return o+=1n}}function l(n,r){return{..._(n),...r}}function f(n){return{...y,...n}}function p(n,r,t){return{decimals:e,x:u,y:o,distanceFrom:function(n){let r=n.x().sub(u()),t=n.y().sub(o());return r.mul(r).add(t.mul(t)).sqrt()}};function e(){return t}function u(){return s(s.Calculator.unwrap(n),e()).expect(M)}function o(){return s(s.Calculator.unwrap(r),e()).expect(M)}}function s(n,r){return t()<0n?m("FPV.ERR_NEGATIVE_DECIMALS"):O({unwrap:function(){return s.Calculator.unwrap(n)},decimals:t,representation:function(){return 10n**t()},eq:function(r){return s.Calculator.eq(n,r)},lt:function(r){return s.Calculator.lt(n,r)},gt:function(r){return s.Calculator.gt(n,r)},lteq:function(r){return s.Calculator.lteq(n,r)},gteq:function(r){return s.Calculator.gteq(n,r)},add:function(r){return s.Calculator.add(n,r,t()).expect(M)},sub:function(r){return s.Calculator.sub(n,r,t()).expect(M)},mul:function(r){return s.Calculator.mul(n,r,t()).expect(M)},div:function(r){return s.Calculator.div(n,r,t())},pow:function(r){return s.Calculator.pow(n,r,t())},sqrt:function(){return s.Calculator.sqrt(n,t())},cst:function(r){return s.Calculator.cst(n,t(),r)}});function t(){return r}}function E(n){let r,t,e;return t=0n,e=new Map,r={unwrap:u,mut:function(t){let o=u(),a=t;return n=t,e.values().toArray().forEach((n=>n(a,o))),r},onChange:function(n){let r=t+=1n;return e.set(r,n),()=>{e.delete(r)}}};function u(){return n}}function d(n){{let r=n;return r?R(function(n){let r="DOM.ERR_UNKNOWN";1===n.code||3===n.code||4===n.code||5===n.code||7===n.code||8===n.code||9===n.code||11===n.code||12===n.code||13===n.code||14===n.code||17===n.code||18===n.code||19===n.code||20===n.code||21===n.code||22===n.code||23===n.code||24===n.code||25===n.code?r=d.Exception.CodeRemap[n.code]:"EncodingError"!==n.name&&"NotReadableError"!==n.name&&"UnknownError"!==n.name&&"ConstraintError"!==n.name&&"DataError"!==n.name&&"TransactionInactiveError"!==n.name&&"ReadOnlyError"!==n.name&&"VersionError"!==n.name&&"OperationError"!==n.name&&"NotAllowedError"!==n.name||(r=d.Exception.NameRemap[n.name]);return r}(r),r.message):R("DOM.ERR_UNKNOWN")}}function R(n,r,t){if("object"==typeof n){let r=n,t=D(r.handler).unwrapOr(R.Handler);return{type:"Error",code:r.code,message:c.Handler.flag(r.message),payload:c.Handler.flag(r.payload),stack:c.Handler.flag(r.stack).unwrapOr(t.localStackTrace(R).unwrapOr(""))}}return{type:"Error",code:n,message:c.Handler.flag(r),payload:c.Handler.flag(t),stack:R.Handler.localStackTrace(R).unwrapOr("")}}function O(n){let r;return r={ok:function(){return!0},err:function(){return!1},expect:function(n){return t()},expectErr:function(n){R.Handler.panic(R("PANIC",n))},unwrap:t,unwrapOr:function(n){return t()},and:function(n){return n(t())},map:function(n){return O(n(t()))},mapErr:function(n){return r},recover:function(n){return r},degrade:function(n){return m(n(t()))},toOption:function(){return _(t())}};function t(){return n}}function m(n,r){let t,e,u,o;return u=n,o=r??R.Handler,e=o.localStackTrace(m).unwrapOr(""),t={ok:function(){return!1},err:function(){return!0},inspect:a,stack:c,expect:function n(r){let t=a();"string"==typeof t&&(t.includes(".")?t.split(".")?.at(1)?.startsWith("ERR")&&R.Handler.panic(t,n):t.startsWith("ERR")&&R.Handler.panic(t,n));"string"==typeof t&&t.includes(".")&&t.split(".")?.at(1)?.startsWith("ERR")&&R.Handler.panic(t,n);if(t instanceof globalThis.Error){let n=t.name,e=`${t.message} ${r?`${r}`:""}`,u=t.stack??c();R.Handler.panic(R({code:n,message:e,stack:u}))}R.Handler.match(a(),(n=>{R.Handler.panic(R({code:n.code,message:`${n.message} ${r?`${r}`:""}`,stack:n.stack}))})),R.Handler.panic(R({code:"PANIC",message:`${r||"An unrecoverable error has caused the program to panic."}`,stack:R.Handler.localStackTrace(n).unwrapOr("")}))},expectErr:function(n){return a()},unwrapOr:function(n){return n},and:function(n){return t},map:function(n){return t},mapErr:function(n){return m(n(a()))},recover:function(n){return O(n(a()))},degrade:function(n){return t},toOption:function(){return y}};function a(){return u}function c(){return e}}function _(n){return{type:function(){return"Some"},some:function(){return!0},none:function(){return!1},expect:function(r){return n},unwrap:function(){return n},unwrapOr:function(r){return n},and:function(r){return r(n)},map:function(r){return _(r(n))},toResult:function(r){return O(n)}}}(e||(e={})).Handler=(()=>{return{match:function(r,t,e){let u=r;if(!n(u))return!1;if("string"==typeof t&&!n(u,t))return!1;let o=u;return"function"==typeof t?(t(o),!0):"function"!=typeof e||(e(o),!0)}};function n(n,r){let t=n;return null!=t&&"object"==typeof t&&"type"in t&&"string"==typeof t.type&&(!r||t.type===r)}})(),(u||(u={})).Handler=(()=>{return{match:function(r,t,e){let u=r;if(!n(u))return!1;if("string"==typeof t&&!n(u,t))return!1;let o=u;return"function"==typeof t?(t(o),!0):"function"!=typeof e||(e(o),!0)}};function n(n,r){let t=n;return null!=t&&"object"==typeof t&&"type"in t&&"function"==typeof t.type&&"string"==typeof t.type()&&(!r||t.type()===r)}})(),(o=s||(s={})).Calculator=(()=>{return{unwrap:n,eq:function(r,t){return n(r)===n(t)},lt:function(r,t){return n(r)<n(t)},gt:function(r,t){return n(r)>n(t)},lteq:function(r,t){return n(r)<=n(t)},gteq:function(r,t){return n(r)>=n(t)},add:function(r,t,e){return o(n(r)+n(t),e)},sub:function(r,t,e){return o(n(r)-n(t),e)},mul:function(r,t,e){let u=n(r),a=n(t),c=u*a;return o(0n===e?c:c/10n**e,e)},div:function(r,t,e){let u=n(r),a=n(t);return 0n===a?m("FPV.ERR_DIVISION_BY_ZERO"):O(0n===e?o(u/a,e).expect(M):o(u*10n**e/u,e).expect(M))},pow:function(t,e,u){let a=n(t),c=n(e);if(c<0n)return m("FPV.ERR_NEGATIVE_EXPONENT");let i=1n;for(;c>0n;)c%2n===1n&&(i=i*a/10n**u),a=a*a/10n**u,c/=2n;let l=r(i,0n,u);if(l.err())return l;let f=l.unwrap().unwrap();return o(f,u)},sqrt:function(r,t){let e=n(r);if(e<0n)return m("FPV.ERR_CANNOT_SQUARE_NAGATIVE");if(0n===e)return o(0n,t);let u=10n**t;u*=e;let a,c=u;do{a=c,c=(a+u/a)/2n}while(c!==a);return o(c,t)},cst:r};function n(n){return"bigint"==typeof n?n:n.unwrap()}function r(r,t,e){if(t<0n)return m("FPV.ERR_NEGATIVE_DECIMALS");if(e<0n)return m("FPV.ERR_NEGATIVE_DECIMALS");let u,a=n(r);return e>t&&(u=10n**(e-t),a*=u),e<t&&(u=10n**(t-e),a/=u),O(o(a,e).expect(M))}})(),(n=>{let r;var t;(t=r=n.Exception||(n.Exception={})).NameRemap={EncodingError:"DOM.ERR_ENCODING",NotReadableError:"DOM.ERR_NOT_READABLE",UnknownError:"DOM.ERR_UNKNOWN",ConstraintError:"DOM.ERR_CONSTRAINT",DataError:"DOM.ERR_DATA",TransactionInactiveError:"DOM.ERR_TRANSACTION_INACTIVE",ReadOnlyError:"DOM.ERR_READ_ONLY",VersionError:"DOM.ERR_VERSION",OperationError:"DOM.ERR_OPERATION",NotAllowedError:"DOM.ERR_NOT_ALLOWED"},t.CodeRemap={1:"DOM.ERR_INDEX_SIZE",3:"DOM.ERR_HIERARCHY_REQUEST",4:"DOM.ERR_WRONG_DOCUMENT",5:"DOM.ERR_INVALID_CHARACTER",7:"DOM.ERR_NO_MODIFICATION_ALLOWED",8:"DOM.ERR_NOT_FOUND",9:"DOM.ERR_NOT_SUPPORTED",11:"DOM.ERR_INVALID_STATE",12:"DOM.ERR_SYNTAX",13:"DOM.ERR_INVALID_MODIFICATION",14:"DOM.ERR_NAMESPACE",17:"DOM.ERR_TYPE_MISMATCH",18:"DOM.ERR_SECURITY",19:"DOM.ERR_NETWORK",20:"DOM.ERR_ABORT",21:"DOM.ERR_URL_MISMATCH",22:"DOM.ERR_QUOTA_EXCEEDED",23:"DOM.ERR_TIMEOUT",24:"DOM.ERR_INVALID_NODE_TYPE",25:"DOM.ERR_DATA_CLONE"}})(d||(d={})),(R||(R={})).Handler=(()=>{let n;return n={match:function(n,r,t){let u=n;if(!e.Handler.match(u))return!1;if("string"==typeof r){let n=r;if(!e.Handler.match(u,n))return!1}let o=u;return"function"==typeof r?(r(o),!0):"function"!=typeof t||(t(o),!0)},panic:function r(t,e,u){if("object"==typeof t){let n=t,r=n.stack.split("\n");throw r.shift(),n.stack=r.join("\n"),console.log(r,"ff"),`c[31m${n.code}: ${n.message.unwrapOr("")}[0m\n${n.stack}`}let o=t,a=D(e).unwrapOr(r),c=D(u).unwrapOr(n).localStackTrace(a).toResult(y).map((n=>{let r=n.split("\n");return r.shift(),r.join("\n")})).recover((()=>"<<< 404 >>>")).unwrap();throw`c[31m${o}[0m\n${c}`},localStackTrace:function(n){let r=globalThis.Error();return globalThis.Error.captureStackTrace(r,n),r.stack?_(r.stack):y}}})(),(a||(a={})).Handler={all:function(n){let r=[],t=0;for(;t<n.length;){let e=n.at(t);if(!e.ok())return e;r.push(e.unwrap()),t++}return O(r)},any:function(n){let r=[],t=0;for(;t<n.length;){let e=n.at(t);if(e.ok())return e;r.push(e.inspect()),t++}return m(r)},wrap:function(n,...r){try{return O(n(...r))}catch(n){return m(t(n))}},wrapAsync:async function(n,...r){try{return O(await n(...r))}catch(n){return m(t(n))}}},(c||(c={})).Handler={flag:function(n){return null==n?y:_(n)},all:function(...n){let r=[],t=0;for(;t<n.length;){let e=n.at(t);if(e.none())return e;r.push(e.unwrap()),t++}return _(r)},any:function(...n){let r=0;for(;r<n.length;){let t=n.at(r);if(t.some())return t;r++}return y}};var y=(()=>{let n;return n={type:function(){return"None"},some:function(){return!1},none:function(){return!0},expect:function n(r){R.Handler.panic(R({code:"PANIC",message:`${r||"A missing value has caused the program to panic."}`,stack:R.Handler.localStackTrace(n).unwrapOr("")}))},unwrapOr:function(n){return n},and:function(r){return n},map:function(r){return n},toResult:function(n){return m(n)}}})(),D=c.Handler.flag,N=c.Handler.all,g=c.Handler.any,A=a.Handler.all,T=a.Handler.any,w=a.Handler.wrap,C=a.Handler.wrapAsync,M="\nUh-oh, looks like Reliq took a wrong turn!\nDon't worry, it's not you-it's us.\nPlease report this at dreamcatcher_foundation@proton.me";export{l as Alloc,u as Branded,e as BrandedStruct,f as DeAlloc,i as Dyn,m as Err,R as Error,s as Fpv,y as None,O as Ok,c as Option,E as Ref,a as Result,_ as Some,t as Unsafe,p as Vec,N as allO,A as allR,g as anyO,T as anyR,r as clone,D as flag,n as toString,w as wrap,C as wrapAsync};//# sourceMappingURL=mod.js.map