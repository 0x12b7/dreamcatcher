"use strict";var e,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,E=Object.prototype.hasOwnProperty,a={};((e,n)=>{for(var t in n)r(e,t,{get:n[t],enumerable:!0})})(a,{EthereumVirtualMachine:()=>p}),module.exports=(e=a,((e,a,i,o)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let u of t(a))E.call(e,u)||u===i||r(e,u,{get:()=>a[u],enumerable:!(o=n(a,u))||o.enumerable});return e})(r({},"__esModule",{value:!0}),e));var i,o=require("ethers"),u=require("ethers"),R=require("ethers"),N=require("ethers"),_=require("ethers"),l=require("reliq"),c=(require("reliq"),require("reliq"),require("reliq")),A=require("reliq"),I=require("reliq"),T=require("reliq"),U=require("reliq"),f=require("reliq"),s=require("reliq"),M=require("reliq");function p(e){let r;{let t=n((0,s.wrap)((()=>new o.JsonRpcProvider(e))));return t.err()?t:(r=t.unwrap(),(0,I.Ok)({query:async function(e){let t=n((0,s.wrap)((()=>new u.Wallet(e.privateKey,r))));if(t.err())return t;let E=t.unwrap(),a=n((0,s.wrap)((()=>new R.Contract(e.to,[e.signature],E))));if(a.err())return a;let i=a.unwrap(),o=n((0,s.wrap)((()=>i.getFunction(e.signature))));if(o.err())return o;let N=o.unwrap(),_=await n((0,M.wrapAsync)((async()=>(0,l.Unsafe)(await N(...e.payload??[])))));if(_.err())return _;let c=_.unwrap();return(0,I.Ok)(c)},touch:async function(e){let t=n((0,s.wrap)((()=>new u.Wallet(e.privateKey,r))));if(t.err())return t;let E=t.unwrap(),a=await n((0,M.wrapAsync)((async()=>await E.getAddress())));if(a.err())return a;let i=a.unwrap(),o=await n((0,M.wrapAsync)((async()=>BigInt(await E.getNonce()))));if(o.err())return o;let R=o.unwrap(),N=n((0,s.wrap)((()=>new _.Interface([e.signature]))));if(N.err())return N;let l=N.unwrap(),f=p.Signature.nameOf(e.signature);if(f.none())return(0,T.Err)({code:"ETHEREUM_VIRTUAL_MACHINE.ERR_MALFORMED_SIGNATURE",data:A.None,message:A.None,reason:A.None,transaction:A.None});let w=f.unwrap(),C=n((0,s.wrap)((()=>l.encodeFunctionData(w,e.payload))));if(C.err())return C;let O=C.unwrap(),L=e.gasPrice?U.Fpv.Calculator.unwrap(e.gasPrice):0n,d=e.gasLimit?U.Fpv.Calculator.unwrap(e.gasLimit):0n,H=await n((0,M.wrapAsync)((async()=>await E.sendTransaction({from:i,to:e.to,nonce:Number(R),gasPrice:L,gasLimit:d,data:O}))));if(H.err())return H;let S=H.unwrap();if(null===S)return(0,T.Err)({code:"ETHEREUM_VIRTUAL_MACHINE.ERR_INVALID_RESPONSE",data:A.None,message:A.None,transaction:A.None,reason:A.None});let m=await n((0,M.wrapAsync)((async()=>await S.wait(Number(e.confirmations),Number(e.timeout)))));if(m.err())return m;let g=m.unwrap();return null===g?(0,I.Ok)(A.None):(0,I.Ok)((0,c.Some)(g))},deploy:async function(e){let t=n((0,s.wrap)((()=>new u.Wallet(e.privateKey,r))));if(t.err())return t;let E=t.unwrap(),a=n((0,s.wrap)((()=>new N.ContractFactory(e.abi,e.bytecode,E))));if(a.err())return a;let i=a.unwrap(),o=await n((0,M.wrapAsync)((async()=>await i.deploy(e.payload))));if(o.err())return o;let R=o.unwrap(),_=await n((0,M.wrapAsync)((async()=>await R.getAddress())));if(_.err())return _;let l=_.unwrap();return(0,I.Ok)(l)}}))}function n(e){if("then"in e){return e.then((e=>n(e)))}if("ok"in e){return e.mapErr((e=>n(e)))}let r=e.inspect();if(null==r||"object"!=typeof r||!("code"in r)||"string"!=typeof r.code)return{code:"ETHEREUM_VIRTUAL_MACHINE.ERR_UNKNOWN",data:A.None,message:A.None,transaction:A.None,reason:A.None};let t="UNKNOWN_ERROR"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_UNKNOWN":"NOT_IMPLEMENTED"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_NOT_IMPLEMENTED":"UNSUPPORTED_OPERATION"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_UNSUPPORTED_OPERATION":"NETWORK_ERROR"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_NETWORK_FAULT":"SERVER_ERROR"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_SERVER_FAULT":"TIMEOUT"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_TIMEOUT":"BAD_DATA"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_BAD_DATA":"CANCELLED"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_CANCELLED":"BUFFER_OVERRUN"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_BUFFER_OVERRUN":"NUMERIC_FAULT"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_NUMERIC_FAULT":"INVALID_ARGUMENT"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_INVALID_ARGUMENT":"MISSING_ARGUMENT"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_MISSING_ARGUMENT":"UNEXPECTED_ARGUMENT"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_UNEXPECTED_ARGUMENT":"CALL_EXCEPTION"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_CALL_EXCEPTION":"INSUFFICIENT_FUNDS"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_INSUFFICIENT_FUNDS":"NONCE_EXPIRED"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_NONCE_EXPIRED":"REPLACEMENT_UNDERPRICED"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_REPLACEMENT_UNDERPRICED":"TRANSACTION_REPLACED"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_TRANSACTION_REPLACED":"UNCONFIGURED_NAME"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_UNCONFIGURED_NAME":"OFFCHAIN_FAULT"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_OFFCHAIN_FAULT":"ACTION_REJECTED"===r.code?"ETHEREUM_VIRTUAL_MACHINE.ERR_ACTION_REJECTED":"ETHEREUM_VIRTUAL_MACHINE.ERR_UNKNOWN",E=A.None,a=A.None,i=A.None,o=A.None;return"data"in r&&(E=(0,c.Some)(r.data)),"message"in r&&(E=(0,c.Some)(r.message)),"transaction"in r&&(E=(0,c.Some)(r.transaction)),"reason"in r&&(E=(0,c.Some)(r.reason)),{code:t,data:E,message:a,transaction:i,reason:o}}}(i=p||(p={})).Signature={nameOf:function(e){let r=e.split(" ");if(0===r.length)return A.None;let n=(0,f.flag)(r.at(1));if(n.none())return n;let t=n.unwrap(),E=(0,f.flag)(t.split("(").at(0));if(E.none())return E;let a=E.unwrap();return(0,c.Some)(a)}},i.SignatureBuilder=function(){let e,r,n,t,E,a;return e={name:function(n){return r=(0,c.Some)(n),e},event:function(){return n=(0,c.Some)("event"),e},external:function(){return n=(0,c.Some)("external"),e},pure:function(){return t=(0,c.Some)("pure"),e},view:function(){return t=(0,c.Some)("view"),e},payload:function(...r){return E=(0,c.Some)(r),e},returns:function(...r){return a=(0,c.Some)(r),e},build:function(){if(r.none())return(0,T.Err)("SIGNATURE_BUILDER.ERR_MISSING_NAME");let e=r.unwrap();if(n.none())return(0,T.Err)("SIGNATURE_BUILDER.ERR_MISSING_TYPE");let o=n.unwrap();if("event"===o){let r=i.Selector.from(e,...E.unwrapOr([])),n=i.EventSignature.from(r);return(0,I.Ok)(n)}if("external"===o){let r=i.Selector.from(e,...E.unwrapOr([]));if(t.none()){let e=i.ExternalSignature.from(r);return(0,I.Ok)(e)}let n=t.unwrap();if("pure"===n){let e=i.ExternalPureSignature.from(r,...a.unwrapOr([]));return(0,I.Ok)(e)}if("view"===n){let e=i.ExternalViewSignature.from(r,...a.unwrapOr([]));return(0,I.Ok)(e)}}return(0,T.Err)("SIGNATURE_BUILDER.ERR_MALFORMED_SIGNATURE")}},r=A.None,n=A.None,t=A.None,E=A.None,a=A.None,e},i.ExternalSignature={from:function(e){return`function ${e} external`}},i.ExternalViewSignature={from:function(e,...r){return`function ${e} external view returns (${i.Data.serialize(...r)})`}},i.ExternalPureSignature={from:function(e,...r){return`function ${e} external pure returns (${i.Data.serialize(...r)})`}},i.EventSignature={from:function(e){return`event ${e}`}},i.Selector={from:function(e,...r){return`${e}(${i.Data.serialize(...r)})`}},i.Data={serialize:function(...e){let r="";for(let n=0n;n<e.length;n++)0n!==n&&(r=", "),r+=e[Number(n)];return r}};//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL2J1bi9tb2QudHMiLCAiLi4vLi4vc3JjL2J1bi9ldGhlcmV1bV92aXJ0dWFsX21hY2hpbmUudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCB7IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUgfSBmcm9tIFwiQGJ1blwiOyIsICJpbXBvcnQgdHlwZSB7IFRyYW5zYWN0aW9uUmVzcG9uc2UgfSBmcm9tIFwiZXRoZXJzXCI7XHJcbmltcG9ydCB0eXBlIHsgVHJhbnNhY3Rpb25SZWNlaXB0IH0gZnJvbSBcImV0aGVyc1wiO1xyXG5pbXBvcnQgdHlwZSB7IENvbnRyYWN0TWV0aG9kIH0gZnJvbSBcImV0aGVyc1wiO1xyXG5pbXBvcnQgdHlwZSB7IEJhc2VDb250cmFjdCB9IGZyb20gXCJldGhlcnNcIjtcclxuaW1wb3J0IHsgSnNvblJwY1Byb3ZpZGVyIH0gZnJvbSBcImV0aGVyc1wiO1xyXG5pbXBvcnQgeyBXYWxsZXQgfSBmcm9tIFwiZXRoZXJzXCI7XHJcbmltcG9ydCB7IENvbnRyYWN0IH0gZnJvbSBcImV0aGVyc1wiO1xyXG5pbXBvcnQgeyBDb250cmFjdEZhY3RvcnkgfSBmcm9tIFwiZXRoZXJzXCI7XHJcbmltcG9ydCB7IEludGVyZmFjZSB9IGZyb20gXCJldGhlcnNcIjtcclxuaW1wb3J0IHsgVW5zYWZlIH0gZnJvbSBcInJlbGlxXCI7XHJcbmltcG9ydCB7IE9wdGlvbiB9IGZyb20gXCJyZWxpcVwiO1xyXG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwicmVsaXFcIjtcclxuaW1wb3J0IHsgU29tZSB9IGZyb20gXCJyZWxpcVwiO1xyXG5pbXBvcnQgeyBOb25lIH0gZnJvbSBcInJlbGlxXCI7XHJcbmltcG9ydCB7IE9rIH0gZnJvbSBcInJlbGlxXCI7XHJcbmltcG9ydCB7IEVyciB9IGZyb20gXCJyZWxpcVwiO1xyXG5pbXBvcnQgeyBGcHYgfSBmcm9tIFwicmVsaXFcIjtcclxuaW1wb3J0IHsgZmxhZyB9IGZyb20gXCJyZWxpcVwiO1xyXG5pbXBvcnQgeyB3cmFwIH0gZnJvbSBcInJlbGlxXCI7XHJcbmltcG9ydCB7IHdyYXBBc3luYyB9IGZyb20gXCJyZWxpcVwiO1xyXG5cclxudHlwZSBfUmVzdWx0JDA8VDEsIFQyPiA9IFJlc3VsdDxUMSwgVDI+O1xyXG5cclxudHlwZSBfVHJhbnNhY3Rpb25SZXNwb25zZSQwID0gVHJhbnNhY3Rpb25SZXNwb25zZTtcclxuXHJcbnR5cGUgX1RyYW5zYWN0aW9uUmVjZWlwdCQwID0gVHJhbnNhY3Rpb25SZWNlaXB0O1xyXG5cclxuZXhwb3J0IHR5cGUgRXRoZXJldW1WaXJ0dWFsTWFjaGluZSA9IHtcclxuICAgIHF1ZXJ5PFQxID0gdW5rbm93biwgVDIgZXh0ZW5kcyBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlBheWxvYWQ8VDE+ID0gRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5QYXlsb2FkPFQxPj4odHJhbnNhY3Rpb246IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUXVlcnk8VDEsIFQyPik6IFByb21pc2U8RXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8VW5zYWZlPj47XHJcbiAgICB0b3VjaDxUMSA9IHVua25vd24sIFQyIGV4dGVuZHMgRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5QYXlsb2FkPFQxPiA9IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUGF5bG9hZDxUMT4+KHRyYW5zYWN0aW9uOiBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlRvdWNoPFQxLCBUMj4pOiBQcm9taXNlPEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PE9wdGlvbjxFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlRyYW5zYWN0aW9uUmVjZWlwdD4+PjtcclxuICAgIGRlcGxveTxUMSA9IHVua25vd24sIFQyIGV4dGVuZHMgRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5QYXlsb2FkPFQxPiA9IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUGF5bG9hZDxUMT4+KHRyYW5zYWN0aW9uOiBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLkRlcGxveW1lbnQ8VDEsIFQyPik6IFByb21pc2U8RXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8RXRoZXJldW1WaXJ0dWFsTWFjaGluZS5BZGRyZXNzPj47XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRXRoZXJldW1WaXJ0dWFsTWFjaGluZShfdXJsOiBzdHJpbmcpOiBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlJlc3VsdDxFdGhlcmV1bVZpcnR1YWxNYWNoaW5lPiB7XHJcbiAgICBsZXQgX2pzb25ScGNQcm92aWRlcjogSnNvblJwY1Byb3ZpZGVyO1xyXG5cclxuICAgIC8qKiBAY29uc3RydWN0b3IgKi8ge1xyXG4gICAgICAgIGxldCBqc29uUnBjUHJvdmlkZXI6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PEpzb25ScGNQcm92aWRlcj4gPSBfbWFwKHdyYXAoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEpzb25ScGNQcm92aWRlcihfdXJsKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgaWYgKGpzb25ScGNQcm92aWRlci5lcnIoKSkgcmV0dXJuIGpzb25ScGNQcm92aWRlcjtcclxuICAgICAgICBfanNvblJwY1Byb3ZpZGVyID0ganNvblJwY1Byb3ZpZGVyLnVud3JhcCgpO1xyXG4gICAgICAgIHJldHVybiBPayh7IHF1ZXJ5LCB0b3VjaCwgZGVwbG95IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQxID0gdW5rbm93biwgVDIgZXh0ZW5kcyBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlBheWxvYWQ8VDE+ID0gRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5QYXlsb2FkPFQxPj4odHJhbnNhY3Rpb246IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUXVlcnk8VDEsIFQyPik6IFByb21pc2U8RXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8VW5zYWZlPj4ge1xyXG4gICAgICAgIGxldCB3YWxsZXQ6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PFdhbGxldD4gPSBfbWFwKHdyYXAoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFdhbGxldCh0cmFuc2FjdGlvbi5wcml2YXRlS2V5LCBfanNvblJwY1Byb3ZpZGVyKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgaWYgKHdhbGxldC5lcnIoKSkgcmV0dXJuIHdhbGxldDtcclxuICAgICAgICBsZXQgd2FsbGV0JDA6IFdhbGxldCA9IHdhbGxldC51bndyYXAoKTtcclxuICAgICAgICBsZXQgY29udHJhY3Q6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PENvbnRyYWN0PiA9IF9tYXAod3JhcCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29udHJhY3QodHJhbnNhY3Rpb24udG8sIFt0cmFuc2FjdGlvbi5zaWduYXR1cmVdLCB3YWxsZXQkMCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmIChjb250cmFjdC5lcnIoKSkgcmV0dXJuIGNvbnRyYWN0O1xyXG4gICAgICAgIGxldCBjb250cmFjdCQwOiBDb250cmFjdCA9IGNvbnRyYWN0LnVud3JhcCgpO1xyXG4gICAgICAgIGxldCBjb250cmFjdE1ldGhvZDogRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8Q29udHJhY3RNZXRob2Q+ID0gX21hcCh3cmFwKCgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0JDAuZ2V0RnVuY3Rpb24odHJhbnNhY3Rpb24uc2lnbmF0dXJlKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgaWYgKGNvbnRyYWN0TWV0aG9kLmVycigpKSByZXR1cm4gY29udHJhY3RNZXRob2Q7XHJcbiAgICAgICAgbGV0IGNvbnRyYWN0TWV0aG9kJDA6IENvbnRyYWN0TWV0aG9kID0gY29udHJhY3RNZXRob2QudW53cmFwKCk7XHJcbiAgICAgICAgbGV0IHJlc3BvbnNlOiBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlJlc3VsdDxVbnNhZmU+ID0gYXdhaXQgX21hcCh3cmFwQXN5bmMoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gVW5zYWZlKGF3YWl0IGNvbnRyYWN0TWV0aG9kJDAoLi4udHJhbnNhY3Rpb24ucGF5bG9hZCA/PyBbXSkpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBpZiAocmVzcG9uc2UuZXJyKCkpIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICBsZXQgcmVzcG9uc2UkMDogVW5zYWZlID0gcmVzcG9uc2UudW53cmFwKCk7XHJcbiAgICAgICAgcmV0dXJuIE9rKHJlc3BvbnNlJDApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZ1bmN0aW9uIHRvdWNoPFQxID0gdW5rbm93biwgVDIgZXh0ZW5kcyBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlBheWxvYWQ8VDE+ID0gRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5QYXlsb2FkPFQxPj4odHJhbnNhY3Rpb246IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuVG91Y2g8VDEsIFQyPik6IFByb21pc2U8RXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8T3B0aW9uPEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuVHJhbnNhY3Rpb25SZWNlaXB0Pj4+IHtcclxuICAgICAgICBsZXQgd2FsbGV0OiBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlJlc3VsdDxXYWxsZXQ+ID0gX21hcCh3cmFwKCgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBXYWxsZXQodHJhbnNhY3Rpb24ucHJpdmF0ZUtleSwgX2pzb25ScGNQcm92aWRlcik7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmICh3YWxsZXQuZXJyKCkpIHJldHVybiB3YWxsZXQ7XHJcbiAgICAgICAgbGV0IHdhbGxldCQwOiBXYWxsZXQgPSB3YWxsZXQudW53cmFwKCk7XHJcbiAgICAgICAgbGV0IGFkZHJlc3M6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuQWRkcmVzcz4gPSBhd2FpdCBfbWFwKHdyYXBBc3luYyhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB3YWxsZXQkMC5nZXRBZGRyZXNzKCkgYXMgRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5BZGRyZXNzO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBpZiAoYWRkcmVzcy5lcnIoKSkgcmV0dXJuIGFkZHJlc3M7XHJcbiAgICAgICAgbGV0IGFkZHJlc3MkMDogRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5BZGRyZXNzID0gYWRkcmVzcy51bndyYXAoKTtcclxuICAgICAgICBsZXQgbm9uY2U6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PGJpZ2ludD4gPSBhd2FpdCBfbWFwKHdyYXBBc3luYyhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBCaWdJbnQoYXdhaXQgd2FsbGV0JDAuZ2V0Tm9uY2UoKSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmIChub25jZS5lcnIoKSkgcmV0dXJuIG5vbmNlO1xyXG4gICAgICAgIGxldCBub25jZSQwOiBiaWdpbnQgPSBub25jZS51bndyYXAoKTtcclxuICAgICAgICBsZXQgaW50ZXJmYWNlJDA6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PEludGVyZmFjZT4gPSBfbWFwKHdyYXAoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEludGVyZmFjZShbdHJhbnNhY3Rpb24uc2lnbmF0dXJlXSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmIChpbnRlcmZhY2UkMC5lcnIoKSkgcmV0dXJuIGludGVyZmFjZSQwO1xyXG4gICAgICAgIGxldCBpbnRlcmZhY2UkMTogSW50ZXJmYWNlID0gaW50ZXJmYWNlJDAudW53cmFwKCk7XHJcbiAgICAgICAgbGV0IG5hbWU6IE9wdGlvbjxzdHJpbmc+ID0gRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5TaWduYXR1cmUubmFtZU9mKHRyYW5zYWN0aW9uLnNpZ25hdHVyZSk7XHJcbiAgICAgICAgaWYgKG5hbWUubm9uZSgpKSByZXR1cm4gRXJyKHtcclxuICAgICAgICAgICAgY29kZTogXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX01BTEZPUk1FRF9TSUdOQVRVUkVcIixcclxuICAgICAgICAgICAgZGF0YTogTm9uZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogTm9uZSxcclxuICAgICAgICAgICAgcmVhc29uOiBOb25lLFxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbjogTm9uZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBuYW1lJDA6IHN0cmluZyA9IG5hbWUudW53cmFwKCk7XHJcbiAgICAgICAgbGV0IGRhdGE6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PHN0cmluZz4gPSBfbWFwKHdyYXAoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJmYWNlJDEuZW5jb2RlRnVuY3Rpb25EYXRhKG5hbWUkMCwgdHJhbnNhY3Rpb24ucGF5bG9hZCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmIChkYXRhLmVycigpKSByZXR1cm4gZGF0YTtcclxuICAgICAgICBsZXQgZGF0YSQwOiBzdHJpbmcgPSBkYXRhLnVud3JhcCgpO1xyXG4gICAgICAgIGxldCBnYXNQcmljZTogYmlnaW50ID0gdHJhbnNhY3Rpb24uZ2FzUHJpY2UgPyBGcHYuQ2FsY3VsYXRvci51bndyYXAodHJhbnNhY3Rpb24uZ2FzUHJpY2UpIDogMG47XHJcbiAgICAgICAgbGV0IGdhc0xpbWl0OiBiaWdpbnQgPSB0cmFuc2FjdGlvbi5nYXNMaW1pdCA/IEZwdi5DYWxjdWxhdG9yLnVud3JhcCh0cmFuc2FjdGlvbi5nYXNMaW1pdCkgOiAwbjtcclxuICAgICAgICBsZXQgcmVzcG9uc2U6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuVHJhbnNhY3Rpb25SZXNwb25zZSB8IG51bGw+ID0gYXdhaXQgX21hcCh3cmFwQXN5bmMoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgd2FsbGV0JDAuc2VuZFRyYW5zYWN0aW9uKHtcclxuICAgICAgICAgICAgICAgIGZyb206IGFkZHJlc3MkMCxcclxuICAgICAgICAgICAgICAgIHRvOiB0cmFuc2FjdGlvbi50byxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiBOdW1iZXIobm9uY2UkMCksXHJcbiAgICAgICAgICAgICAgICBnYXNQcmljZTogZ2FzUHJpY2UsXHJcbiAgICAgICAgICAgICAgICBnYXNMaW1pdDogZ2FzTGltaXQsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhJDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5lcnIoKSkgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgIGxldCByZXNwb25zZSQwOiBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlRyYW5zYWN0aW9uUmVzcG9uc2UgfCBudWxsID0gcmVzcG9uc2UudW53cmFwKCk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlJDAgPT09IG51bGwpIHJldHVybiBFcnIoe1xyXG4gICAgICAgICAgICBjb2RlOiBcIkVUSEVSRVVNX1ZJUlRVQUxfTUFDSElORS5FUlJfSU5WQUxJRF9SRVNQT05TRVwiLFxyXG4gICAgICAgICAgICBkYXRhOiBOb25lLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBOb25lLFxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbjogTm9uZSxcclxuICAgICAgICAgICAgcmVhc29uOiBOb25lXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHJlY2VpcHQ6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuVHJhbnNhY3Rpb25SZWNlaXB0IHwgbnVsbD4gPSBhd2FpdCBfbWFwKHdyYXBBc3luYyhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZSQwLndhaXQoTnVtYmVyKHRyYW5zYWN0aW9uLmNvbmZpcm1hdGlvbnMpLCBOdW1iZXIodHJhbnNhY3Rpb24udGltZW91dCkpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBpZiAocmVjZWlwdC5lcnIoKSkgcmV0dXJuIHJlY2VpcHQ7XHJcbiAgICAgICAgbGV0IHJlY2VpcHQkMDogRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5UcmFuc2FjdGlvblJlY2VpcHQgfCBudWxsID0gcmVjZWlwdC51bndyYXAoKTtcclxuICAgICAgICBpZiAocmVjZWlwdCQwID09PSBudWxsKSByZXR1cm4gT2soTm9uZSk7XHJcbiAgICAgICAgcmV0dXJuIE9rKFNvbWUocmVjZWlwdCQwKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZnVuY3Rpb24gZGVwbG95PFQxID0gdW5rbm93biwgVDIgZXh0ZW5kcyBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlBheWxvYWQ8VDE+ID0gRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5QYXlsb2FkPFQxPj4odHJhbnNhY3Rpb246IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuRGVwbG95bWVudDxUMSwgVDI+KTogUHJvbWlzZTxFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlJlc3VsdDxFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLkFkZHJlc3M+PiB7ICAgICAgICBcclxuICAgICAgICBsZXQgd2FsbGV0OiBFdGhlcmV1bVZpcnR1YWxNYWNoaW5lLlJlc3VsdDxXYWxsZXQ+ID0gX21hcCh3cmFwKCgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBXYWxsZXQodHJhbnNhY3Rpb24ucHJpdmF0ZUtleSwgX2pzb25ScGNQcm92aWRlcik7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmICh3YWxsZXQuZXJyKCkpIHJldHVybiB3YWxsZXQ7XHJcbiAgICAgICAgbGV0IHdhbGxldCQwOiBXYWxsZXQgPSB3YWxsZXQudW53cmFwKCk7XHJcbiAgICAgICAgbGV0IGNvbnRyYWN0RmFjdG9yeTogRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8Q29udHJhY3RGYWN0b3J5PiA9IF9tYXAod3JhcCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29udHJhY3RGYWN0b3J5KHRyYW5zYWN0aW9uLmFiaSwgdHJhbnNhY3Rpb24uYnl0ZWNvZGUsIHdhbGxldCQwKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgaWYgKGNvbnRyYWN0RmFjdG9yeS5lcnIoKSkgcmV0dXJuIGNvbnRyYWN0RmFjdG9yeTtcclxuICAgICAgICBsZXQgY29udHJhY3RGYWN0b3J5JDA6IENvbnRyYWN0RmFjdG9yeSA9IGNvbnRyYWN0RmFjdG9yeS51bndyYXAoKTtcclxuICAgICAgICBsZXQgY29udHJhY3Q6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PEJhc2VDb250cmFjdD4gPSBhd2FpdCBfbWFwKHdyYXBBc3luYyhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjb250cmFjdEZhY3RvcnkkMC5kZXBsb3kodHJhbnNhY3Rpb24ucGF5bG9hZCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGlmIChjb250cmFjdC5lcnIoKSkgcmV0dXJuIGNvbnRyYWN0O1xyXG4gICAgICAgIGxldCBjb250cmFjdCQwOiBCYXNlQ29udHJhY3QgPSBjb250cmFjdC51bndyYXAoKTtcclxuICAgICAgICBsZXQgYWRkcmVzczogRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8RXRoZXJldW1WaXJ0dWFsTWFjaGluZS5BZGRyZXNzPiA9IGF3YWl0IF9tYXAod3JhcEFzeW5jKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGNvbnRyYWN0JDAuZ2V0QWRkcmVzcygpIGFzIEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuQWRkcmVzcztcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgaWYgKGFkZHJlc3MuZXJyKCkpIHJldHVybiBhZGRyZXNzO1xyXG4gICAgICAgIGxldCBhZGRyZXNzJDA6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuQWRkcmVzcyA9IGFkZHJlc3MudW53cmFwKCk7XHJcbiAgICAgICAgcmV0dXJuIE9rKGFkZHJlc3MkMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX21hcDxUMT4ocmVzdWx0OiBQcm9taXNlPF9SZXN1bHQkMDxUMSwgVW5zYWZlPj4pOiBQcm9taXNlPEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PFQxPj47XHJcbiAgICBmdW5jdGlvbiBfbWFwPFQxPihyZXN1bHQ6IF9SZXN1bHQkMDxUMSwgVW5zYWZlPik6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuUmVzdWx0PFQxPjtcclxuICAgIGZ1bmN0aW9uIF9tYXA8VDE+KHVuc2FmZTogVW5zYWZlKTogRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5FcnJvcjtcclxuICAgIGZ1bmN0aW9uIF9tYXA8VDE+KFxyXG4gICAgICAgIHAwOiBcclxuICAgICAgICAgICAgfCBQcm9taXNlPF9SZXN1bHQkMDxUMSwgVW5zYWZlPj5cclxuICAgICAgICAgICAgfCBfUmVzdWx0JDA8VDEsIFVuc2FmZT4gXHJcbiAgICAgICAgICAgIHwgVW5zYWZlXHJcbiAgICApOiBcclxuICAgICAgICB8IFByb21pc2U8RXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8VDE+PlxyXG4gICAgICAgIHwgRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5SZXN1bHQ8VDE+IFxyXG4gICAgICAgIHwgRXRoZXJldW1WaXJ0dWFsTWFjaGluZS5FcnJvciB7XHJcbiAgICAgICAgaWYgKFwidGhlblwiIGluIHAwKSB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQ6IFByb21pc2U8X1Jlc3VsdCQwPFQxLCBVbnNhZmU+PiA9IHAwO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4ocmVzdWx0JDAgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9tYXAocmVzdWx0JDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFwib2tcIiBpbiBwMCkge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0OiBfUmVzdWx0JDA8VDEsIFVuc2FmZT4gPSBwMDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5tYXBFcnIoZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX21hcChlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB1bnNhZmU6IFVuc2FmZSA9IHAwO1xyXG4gICAgICAgIGxldCBlOiB1bmtub3duID0gdW5zYWZlLmluc3BlY3QoKTtcclxuICAgICAgICBpZiAoIShcclxuICAgICAgICAgICAgZSAhPT0gbnVsbFxyXG4gICAgICAgICAgICAmJiBlICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCJcclxuICAgICAgICAgICAgJiYgXCJjb2RlXCIgaW4gZVxyXG4gICAgICAgICAgICAmJiB0eXBlb2YgZS5jb2RlID09PSBcInN0cmluZ1wiXHJcbiAgICAgICAgKSkgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29kZTogXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX1VOS05PV05cIixcclxuICAgICAgICAgICAgZGF0YTogTm9uZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogTm9uZSxcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb246IE5vbmUsXHJcbiAgICAgICAgICAgIHJlYXNvbjogTm9uZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGNvZGU6IEV0aGVyZXVtVmlydHVhbE1hY2hpbmUuRXJyb3JDb2RlID1cclxuICAgICAgICAgICAgZS5jb2RlID09PSBcIlVOS05PV05fRVJST1JcIiA/IFwiRVRIRVJFVU1fVklSVFVBTF9NQUNISU5FLkVSUl9VTktOT1dOXCIgOlxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IFwiTk9UX0lNUExFTUVOVEVEXCIgPyBcIkVUSEVSRVVNX1ZJUlRVQUxfTUFDSElORS5FUlJfTk9UX0lNUExFTUVOVEVEXCIgOlxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IFwiVU5TVVBQT1JURURfT1BFUkFUSU9OXCIgPyBcIkVUSEVSRVVNX1ZJUlRVQUxfTUFDSElORS5FUlJfVU5TVVBQT1JURURfT1BFUkFUSU9OXCIgOlxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IFwiTkVUV09SS19FUlJPUlwiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX05FVFdPUktfRkFVTFRcIiA6XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gXCJTRVJWRVJfRVJST1JcIiA/IFwiRVRIRVJFVU1fVklSVFVBTF9NQUNISU5FLkVSUl9TRVJWRVJfRkFVTFRcIiA6XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gXCJUSU1FT1VUXCIgPyBcIkVUSEVSRVVNX1ZJUlRVQUxfTUFDSElORS5FUlJfVElNRU9VVFwiIDpcclxuICAgICAgICAgICAgZS5jb2RlID09PSBcIkJBRF9EQVRBXCIgPyBcIkVUSEVSRVVNX1ZJUlRVQUxfTUFDSElORS5FUlJfQkFEX0RBVEFcIiA6XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gXCJDQU5DRUxMRURcIiA/IFwiRVRIRVJFVU1fVklSVFVBTF9NQUNISU5FLkVSUl9DQU5DRUxMRURcIiA6XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gXCJCVUZGRVJfT1ZFUlJVTlwiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX0JVRkZFUl9PVkVSUlVOXCIgOlxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IFwiTlVNRVJJQ19GQVVMVFwiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX05VTUVSSUNfRkFVTFRcIiA6XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gXCJJTlZBTElEX0FSR1VNRU5UXCIgPyBcIkVUSEVSRVVNX1ZJUlRVQUxfTUFDSElORS5FUlJfSU5WQUxJRF9BUkdVTUVOVFwiIDpcclxuICAgICAgICAgICAgZS5jb2RlID09PSBcIk1JU1NJTkdfQVJHVU1FTlRcIiA/IFwiRVRIRVJFVU1fVklSVFVBTF9NQUNISU5FLkVSUl9NSVNTSU5HX0FSR1VNRU5UXCIgOlxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IFwiVU5FWFBFQ1RFRF9BUkdVTUVOVFwiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX1VORVhQRUNURURfQVJHVU1FTlRcIiA6XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gXCJDQUxMX0VYQ0VQVElPTlwiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX0NBTExfRVhDRVBUSU9OXCIgOiBcclxuICAgICAgICAgICAgZS5jb2RlID09PSBcIklOU1VGRklDSUVOVF9GVU5EU1wiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX0lOU1VGRklDSUVOVF9GVU5EU1wiIDpcclxuICAgICAgICAgICAgZS5jb2RlID09PSBcIk5PTkNFX0VYUElSRURcIiA/IFwiRVRIRVJFVU1fVklSVFVBTF9NQUNISU5FLkVSUl9OT05DRV9FWFBJUkVEXCIgOlxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IFwiUkVQTEFDRU1FTlRfVU5ERVJQUklDRURcIiA/IFwiRVRIRVJFVU1fVklSVFVBTF9NQUNISU5FLkVSUl9SRVBMQUNFTUVOVF9VTkRFUlBSSUNFRFwiIDpcclxuICAgICAgICAgICAgZS5jb2RlID09PSBcIlRSQU5TQUNUSU9OX1JFUExBQ0VEXCIgPyBcIkVUSEVSRVVNX1ZJUlRVQUxfTUFDSElORS5FUlJfVFJBTlNBQ1RJT05fUkVQTEFDRURcIiA6XHJcbiAgICAgICAgICAgIGUuY29kZSA9PT0gXCJVTkNPTkZJR1VSRURfTkFNRVwiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX1VOQ09ORklHVVJFRF9OQU1FXCIgOlxyXG4gICAgICAgICAgICBlLmNvZGUgPT09IFwiT0ZGQ0hBSU5fRkFVTFRcIiA/IFwiRVRIRVJFVU1fVklSVFVBTF9NQUNISU5FLkVSUl9PRkZDSEFJTl9GQVVMVFwiIDpcclxuICAgICAgICAgICAgZS5jb2RlID09PSBcIkFDVElPTl9SRUpFQ1RFRFwiID8gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX0FDVElPTl9SRUpFQ1RFRFwiIDpcclxuICAgICAgICAgICAgXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkUuRVJSX1VOS05PV05cIjtcclxuICAgICAgICBsZXQgZGF0YTogT3B0aW9uPHVua25vd24+ID0gTm9uZTtcclxuICAgICAgICBsZXQgbWVzc2FnZTogT3B0aW9uPHVua25vd24+ID0gTm9uZTtcclxuICAgICAgICBsZXQgdHJhbnNhY3Rpb246IE9wdGlvbjx1bmtub3duPiA9IE5vbmU7XHJcbiAgICAgICAgbGV0IHJlYXNvbjogT3B0aW9uPHVua25vd24+ID0gTm9uZTtcclxuICAgICAgICBpZiAoXCJkYXRhXCIgaW4gZSkgZGF0YSA9IFNvbWUoZS5kYXRhKTtcclxuICAgICAgICBpZiAoXCJtZXNzYWdlXCIgaW4gZSkgZGF0YSA9IFNvbWUoZS5tZXNzYWdlKTtcclxuICAgICAgICBpZiAoXCJ0cmFuc2FjdGlvblwiIGluIGUpIGRhdGEgPSBTb21lKGUudHJhbnNhY3Rpb24pO1xyXG4gICAgICAgIGlmIChcInJlYXNvblwiIGluIGUpIGRhdGEgPSBTb21lKGUucmVhc29uKTtcclxuICAgICAgICByZXR1cm4geyBjb2RlLCBkYXRhLCBtZXNzYWdlLCB0cmFuc2FjdGlvbiwgcmVhc29uIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBuYW1lc3BhY2UgRXRoZXJldW1WaXJ0dWFsTWFjaGluZSB7XHJcbiAgICBleHBvcnQgdHlwZSBSZXN1bHQ8VDE+ID0gX1Jlc3VsdCQwPFQxLCBFcnJvcj47XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgRXJyb3IgPSB7XHJcbiAgICAgICAgY29kZTogRXJyb3JDb2RlO1xyXG4gICAgICAgIGRhdGE6IE9wdGlvbjx1bmtub3duPjtcclxuICAgICAgICBtZXNzYWdlOiBPcHRpb248dW5rbm93bj47XHJcbiAgICAgICAgdHJhbnNhY3Rpb246IE9wdGlvbjx1bmtub3duPjtcclxuICAgICAgICByZWFzb246IE9wdGlvbjx1bmtub3duPjtcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgRXJyb3JDb2RlID1cclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9NQUxGT1JNRURfU0lHTkFUVVJFYFxyXG5cclxuICAgICAgICAvLy8gR2VuZXJpY1xyXG4gICAgICAgIHwgYCR7IEJyYW5kIH0uRVJSX1VOS05PV05gXHJcbiAgICAgICAgfCBgJHsgQnJhbmQgfS5FUlJfTk9UX0lNUExFTUVOVEVEYFxyXG4gICAgICAgIHwgYCR7IEJyYW5kIH0uRVJSX1VOU1VQUE9SVEVEX09QRVJBVElPTmBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9ORVRXT1JLX0ZBVUxUYFxyXG4gICAgICAgIHwgYCR7IEJyYW5kIH0uRVJSX1NFUlZFUl9GQVVMVGBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9USU1FT1VUYFxyXG4gICAgICAgIHwgYCR7IEJyYW5kIH0uRVJSX0JBRF9EQVRBYFxyXG4gICAgICAgIHwgYCR7IEJyYW5kIH0uRVJSX0NBTkNFTExFRGBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9JTlZBTElEX1JFU1BPTlNFYFxyXG5cclxuICAgICAgICAvLy8gT3BlcmF0aW9uYWxcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9CVUZGRVJfT1ZFUlJVTmBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9OVU1FUklDX0ZBVUxUYFxyXG5cclxuICAgICAgICAvLy8gQXJndW1lbnRcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9JTlZBTElEX0FSR1VNRU5UYFxyXG4gICAgICAgIHwgYCR7IEJyYW5kIH0uRVJSX01JU1NJTkdfQVJHVU1FTlRgXHJcbiAgICAgICAgfCBgJHsgQnJhbmQgfS5FUlJfVU5FWFBFQ1RFRF9BUkdVTUVOVGBcclxuXHJcbiAgICAgICAgLy8vIEJsb2NrY2hhaW5cclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9DQUxMX0VYQ0VQVElPTmBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9JTlNVRkZJQ0lFTlRfRlVORFNgXHJcbiAgICAgICAgfCBgJHsgQnJhbmQgfS5FUlJfTk9OQ0VfRVhQSVJFRGBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9SRVBMQUNFTUVOVF9VTkRFUlBSSUNFRGBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9UUkFOU0FDVElPTl9SRVBMQUNFRGBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9VTkNPTkZJR1VSRURfTkFNRWBcclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9PRkZDSEFJTl9GQVVMVGBcclxuXHJcbiAgICAgICAgLy8vIFVzZXIgSW50ZXJhY3Rpb25cclxuICAgICAgICB8IGAkeyBCcmFuZCB9LkVSUl9BQ1RJT05fUkVKRUNURURgO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIEJyYW5kID0gXCJFVEhFUkVVTV9WSVJUVUFMX01BQ0hJTkVcIjtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBUcmFuc2FjdGlvblJlc3BvbnNlID0gX1RyYW5zYWN0aW9uUmVzcG9uc2UkMDtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBUcmFuc2FjdGlvblJlY2VpcHQgPSBfVHJhbnNhY3Rpb25SZWNlaXB0JDA7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgVHJhbnNhY3Rpb248VDEgPSB1bmtub3duLCBUMiBleHRlbmRzIFBheWxvYWQ8VDE+ID0gUGF5bG9hZDxUMT4+ID1cclxuICAgICAgICB8IFF1ZXJ5PFQxLCBUMj5cclxuICAgICAgICB8IFRvdWNoPFQxLCBUMj5cclxuICAgICAgICB8IERlcGxveW1lbnQ8VDEsIFQyPjtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBRdWVyeTxUMSA9IHVua25vd24sIFQyIGV4dGVuZHMgUGF5bG9hZDxUMT4gPSBQYXlsb2FkPFQxPj4gPSB7XHJcbiAgICAgICAgcHJpdmF0ZUtleTogc3RyaW5nO1xyXG4gICAgICAgIHRvOiBBZGRyZXNzO1xyXG4gICAgICAgIHNpZ25hdHVyZTogTm9uQW1iaWVudFNpZ25hdHVyZTtcclxuICAgICAgICBwYXlsb2FkPzogVDI7XHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIFRvdWNoPFQxID0gdW5rbm93biwgVDIgZXh0ZW5kcyBQYXlsb2FkPFQxPiA9IFBheWxvYWQ8VDE+PiA9IHtcclxuICAgICAgICBwcml2YXRlS2V5OiBzdHJpbmc7XHJcbiAgICAgICAgdG86IEFkZHJlc3M7XHJcbiAgICAgICAgc2lnbmF0dXJlOiBOb25BbWJpZW50U2lnbmF0dXJlO1xyXG4gICAgICAgIHBheWxvYWQ/OiBUMjtcclxuICAgICAgICBnYXNQcmljZT86IEZwdi5Db21wYXRpYmxlPDE4bj47XHJcbiAgICAgICAgZ2FzTGltaXQ/OiBGcHYuQ29tcGF0aWJsZTwxOG4+O1xyXG4gICAgICAgIGFtb3VudD86IEZwdi5Db21wYXRpYmxlPDE4bj47XHJcbiAgICAgICAgY2hhaW5JZD86IGJpZ2ludDtcclxuICAgICAgICB0aW1lb3V0PzogYmlnaW50O1xyXG4gICAgICAgIGNvbmZpcm1hdGlvbnM/OiBiaWdpbnQ7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBleHBvcnQgdHlwZSBEZXBsb3ltZW50PFQxID0gdW5rbm93biwgVDIgZXh0ZW5kcyBQYXlsb2FkPFQxPiA9IFBheWxvYWQ8VDE+PiA9IHtcclxuICAgICAgICBwcml2YXRlS2V5OiBzdHJpbmc7XHJcbiAgICAgICAgYnl0ZWNvZGU6IEJ5dGVjb2RlO1xyXG4gICAgICAgIGFiaTogQWJzdHJhY3RCaW5hcnlJbnRlcmZhY2U7XHJcbiAgICAgICAgcGF5bG9hZD86IFQyO1xyXG4gICAgICAgIGdhc1ByaWNlPzogRnB2LkNvbXBhdGlibGU8MThuPjtcclxuICAgICAgICBnYXNMaW1pdD86IEZwdi5Db21wYXRpYmxlPDE4bj47XHJcbiAgICAgICAgYW1vdW50PzogRnB2LkNvbXBhdGlibGU8MThuPjtcclxuICAgICAgICBjaGFpbklkPzogYmlnaW50O1xyXG4gICAgICAgIGNvbmZpcm1hdGlvbnM/OiBiaWdpbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIFBheWxvYWQ8VDEgPSB1bmtub3duPiA9IEFycmF5PFQxPjtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBOb25BbWJpZW50U2lnbmF0dXJlID0gRXhjbHVkZTxTaWduYXR1cmUsIEV2ZW50U2lnbmF0dXJlPjtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBTaWduYXR1cmUgPVxyXG4gICAgICAgIHwgRXZlbnRTaWduYXR1cmVcclxuICAgICAgICB8IEV4dGVybmFsUHVyZVNpZ25hdHVyZVxyXG4gICAgICAgIHwgRXh0ZXJuYWxWaWV3U2lnbmF0dXJlXHJcbiAgICAgICAgfCBFeHRlcm5hbFNpZ25hdHVyZTtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBTaWduYXR1cmVIYW5kbGVyID0ge1xyXG4gICAgICAgIG5hbWVPZihzaWduYXR1cmU6IFNpZ25hdHVyZSk6IE9wdGlvbjxzdHJpbmc+O1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnQgY29uc3QgU2lnbmF0dXJlOiBTaWduYXR1cmVIYW5kbGVyID0gKCgpID0+IHtcclxuICAgICAgICAvKioqLyB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG5hbWVPZiB9O1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIG5hbWVPZihzaWduYXR1cmU6IFNpZ25hdHVyZSk6IE9wdGlvbjxzdHJpbmc+IHtcclxuICAgICAgICAgICAgbGV0IHNoYXJkczogQXJyYXk8c3RyaW5nPiA9IHNpZ25hdHVyZS5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgIGlmIChzaGFyZHMubGVuZ3RoID09PSAwKSByZXR1cm4gTm9uZTtcclxuICAgICAgICAgICAgbGV0IHN0cmluZzogT3B0aW9uPHN0cmluZz4gPSBmbGFnKHNoYXJkcy5hdCgxKSk7XHJcbiAgICAgICAgICAgIGlmIChzdHJpbmcubm9uZSgpKSByZXR1cm4gc3RyaW5nO1xyXG4gICAgICAgICAgICBsZXQgc3RyaW5nJDA6IHN0cmluZyA9IHN0cmluZy51bndyYXAoKTtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdDogT3B0aW9uPHN0cmluZz4gPSBmbGFnKFxyXG4gICAgICAgICAgICAgICAgc3RyaW5nJDBcclxuICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXCIoXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmF0KDApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQubm9uZSgpKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0JDA6IHN0cmluZyA9IHJlc3VsdC51bndyYXAoKTtcclxuICAgICAgICAgICAgcmV0dXJuIFNvbWUocmVzdWx0JDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pKCk7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgU2lnbmF0dXJlQnVpbGRlciA9IHtcclxuICAgICAgICBuYW1lKG5hbWU6IHN0cmluZyk6IFNpZ25hdHVyZUJ1aWxkZXI7XHJcbiAgICAgICAgZXZlbnQoKTogU2lnbmF0dXJlQnVpbGRlcjtcclxuICAgICAgICBleHRlcm5hbCgpOiBTaWduYXR1cmVCdWlsZGVyO1xyXG4gICAgICAgIHB1cmUoKTogU2lnbmF0dXJlQnVpbGRlcjtcclxuICAgICAgICB2aWV3KCk6IFNpZ25hdHVyZUJ1aWxkZXI7XHJcbiAgICAgICAgcGF5bG9hZCguLi5kYXRhOiBBcnJheTxEYXRhPik6IFNpZ25hdHVyZUJ1aWxkZXI7XHJcbiAgICAgICAgcmV0dXJucyguLi5kYXRhOiBBcnJheTxEYXRhPik6IFNpZ25hdHVyZUJ1aWxkZXI7XHJcbiAgICAgICAgYnVpbGQoKTogU2lnbmF0dXJlQnVpbGRlci5SZXN1bHQ8U2lnbmF0dXJlPjtcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIFNpZ25hdHVyZUJ1aWxkZXIoKTogU2lnbmF0dXJlQnVpbGRlciB7XHJcbiAgICAgICAgbGV0IF90aGlzOiBTaWduYXR1cmVCdWlsZGVyO1xyXG4gICAgICAgIGxldCBfbmFtZTogT3B0aW9uPHN0cmluZz47XHJcbiAgICAgICAgbGV0IF90eXBlOiBPcHRpb248XCJldmVudFwiIHwgXCJleHRlcm5hbFwiPjtcclxuICAgICAgICBsZXQgX3Zpc2liaWxpdHk6IE9wdGlvbjxcInB1cmVcIiB8IFwidmlld1wiPjtcclxuICAgICAgICBsZXQgX3BheWxvYWQ6IE9wdGlvbjxBcnJheTxEYXRhPj47XHJcbiAgICAgICAgbGV0IF9yZXR1cm5zOiBPcHRpb248QXJyYXk8RGF0YT4+O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKiovIHtcclxuICAgICAgICAgICAgX3RoaXMgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgICAgICBleHRlcm5hbCxcclxuICAgICAgICAgICAgICAgIHB1cmUsXHJcbiAgICAgICAgICAgICAgICB2aWV3LFxyXG4gICAgICAgICAgICAgICAgcGF5bG9hZCxcclxuICAgICAgICAgICAgICAgIHJldHVybnMsXHJcbiAgICAgICAgICAgICAgICBidWlsZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBfbmFtZSA9IE5vbmU7XHJcbiAgICAgICAgICAgIF90eXBlID0gTm9uZTtcclxuICAgICAgICAgICAgX3Zpc2liaWxpdHkgPSBOb25lO1xyXG4gICAgICAgICAgICBfcGF5bG9hZCA9IE5vbmU7XHJcbiAgICAgICAgICAgIF9yZXR1cm5zID0gTm9uZTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIG5hbWUobmFtZTogc3RyaW5nKTogU2lnbmF0dXJlQnVpbGRlciB7XHJcbiAgICAgICAgICAgIF9uYW1lID0gU29tZShuYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGV2ZW50KCk6IFNpZ25hdHVyZUJ1aWxkZXIge1xyXG4gICAgICAgICAgICBfdHlwZSA9IFNvbWU8XCJldmVudFwiPihcImV2ZW50XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZXh0ZXJuYWwoKTogU2lnbmF0dXJlQnVpbGRlciB7XHJcbiAgICAgICAgICAgIF90eXBlID0gU29tZTxcImV4dGVybmFsXCI+KFwiZXh0ZXJuYWxcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiBwdXJlKCk6IFNpZ25hdHVyZUJ1aWxkZXIge1xyXG4gICAgICAgICAgICBfdmlzaWJpbGl0eSA9IFNvbWU8XCJwdXJlXCI+KFwicHVyZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIHZpZXcoKTogU2lnbmF0dXJlQnVpbGRlciB7XHJcbiAgICAgICAgICAgIF92aXNpYmlsaXR5ID0gU29tZTxcInZpZXdcIj4oXCJ2aWV3XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gcGF5bG9hZCguLi5kYXRhOiBBcnJheTxEYXRhPik6IFNpZ25hdHVyZUJ1aWxkZXIge1xyXG4gICAgICAgICAgICBfcGF5bG9hZCA9IFNvbWUoZGF0YSk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBmdW5jdGlvbiByZXR1cm5zKC4uLmRhdGE6IEFycmF5PERhdGE+KTogU2lnbmF0dXJlQnVpbGRlciB7XHJcbiAgICAgICAgICAgIF9yZXR1cm5zID0gU29tZShkYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkKCk6IFNpZ25hdHVyZUJ1aWxkZXIuUmVzdWx0PFNpZ25hdHVyZT4ge1xyXG4gICAgICAgICAgICBpZiAoX25hbWUubm9uZSgpKSByZXR1cm4gRXJyKFwiU0lHTkFUVVJFX0JVSUxERVIuRVJSX01JU1NJTkdfTkFNRVwiKTtcclxuICAgICAgICAgICAgbGV0IG5hbWU6IHN0cmluZyA9IF9uYW1lLnVud3JhcCgpO1xyXG4gICAgICAgICAgICBpZiAoX3R5cGUubm9uZSgpKSByZXR1cm4gRXJyKFwiU0lHTkFUVVJFX0JVSUxERVIuRVJSX01JU1NJTkdfVFlQRVwiKTtcclxuICAgICAgICAgICAgbGV0IHR5cGU6IFwiZXZlbnRcIiB8IFwiZXh0ZXJuYWxcIiA9IF90eXBlLnVud3JhcCgpO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gXCJldmVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0b3I6IFNlbGVjdG9yID0gU2VsZWN0b3IuZnJvbShuYW1lLCAuLi5fcGF5bG9hZC51bndyYXBPcihbXSkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNpZ25hdHVyZTogRXZlbnRTaWduYXR1cmUgPSBFdmVudFNpZ25hdHVyZS5mcm9tKHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBPayhzaWduYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSBcImV4dGVybmFsXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RvcjogU2VsZWN0b3IgPSBTZWxlY3Rvci5mcm9tKG5hbWUsIC4uLl9wYXlsb2FkLnVud3JhcE9yKFtdKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3Zpc2liaWxpdHkubm9uZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpZ25hdHVyZTogRXh0ZXJuYWxTaWduYXR1cmUgPSBFeHRlcm5hbFNpZ25hdHVyZS5mcm9tKHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2soc2lnbmF0dXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCB2aXNpYmlsaXR5OiBcInB1cmVcIiB8IFwidmlld1wiID0gX3Zpc2liaWxpdHkudW53cmFwKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmlzaWJpbGl0eSA9PT0gXCJwdXJlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2lnbmF0dXJlOiBFeHRlcm5hbFB1cmVTaWduYXR1cmUgPSBFeHRlcm5hbFB1cmVTaWduYXR1cmUuZnJvbShzZWxlY3RvciwgLi4uX3JldHVybnMudW53cmFwT3IoW10pKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2soc2lnbmF0dXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh2aXNpYmlsaXR5ID09PSBcInZpZXdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzaWduYXR1cmU6IEV4dGVybmFsVmlld1NpZ25hdHVyZSA9IEV4dGVybmFsVmlld1NpZ25hdHVyZS5mcm9tKHNlbGVjdG9yLCAuLi5fcmV0dXJucy51bndyYXBPcihbXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPayhzaWduYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBFcnIoXCJTSUdOQVRVUkVfQlVJTERFUi5FUlJfTUFMRk9STUVEX1NJR05BVFVSRVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgU2lnbmF0dXJlQnVpbGRlciB7XHJcbiAgICAgICAgZXhwb3J0IHR5cGUgUmVzdWx0PFQxPiA9IF9SZXN1bHQkMDxUMSwgRXJyb3JDb2RlPjtcclxuICAgIFxyXG4gICAgICAgIGV4cG9ydCB0eXBlIEVycm9yQ29kZSA9XHJcbiAgICAgICAgICAgIHwgXCJTSUdOQVRVUkVfQlVJTERFUi5FUlJfTUlTU0lOR19OQU1FXCJcclxuICAgICAgICAgICAgfCBcIlNJR05BVFVSRV9CVUlMREVSLkVSUl9NSVNTSU5HX1RZUEVcIlxyXG4gICAgICAgICAgICB8IFwiU0lHTkFUVVJFX0JVSUxERVIuRVJSX01BTEZPUk1FRF9TSUdOQVRVUkVcIjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgdHlwZSBFeHRlcm5hbFNpZ25hdHVyZSA9IGBmdW5jdGlvbiAkeyBzdHJpbmcgfSgkeyBzdHJpbmcgfSkgZXh0ZXJuYWxgO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIEV4dGVybmFsU2lnbmF0dXJlSGFuZGxlciA9IHtcclxuICAgICAgICBmcm9tKHNlbGVjdG9yOiBTZWxlY3Rvcik6IEV4dGVybmFsU2lnbmF0dXJlO1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnQgY29uc3QgRXh0ZXJuYWxTaWduYXR1cmU6IEV4dGVybmFsU2lnbmF0dXJlSGFuZGxlciA9ICgoKSA9PiB7XHJcbiAgICAgICAgLyoqKi8ge1xyXG4gICAgICAgICAgICByZXR1cm4geyBmcm9tIH07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZnJvbShzZWxlY3RvcjogU2VsZWN0b3IpOiBFeHRlcm5hbFNpZ25hdHVyZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgZnVuY3Rpb24gJHsgc2VsZWN0b3IgfSBleHRlcm5hbGA7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBFeHRlcm5hbFZpZXdTaWduYXR1cmUgPSBgZnVuY3Rpb24gJHsgc3RyaW5nIH0oJHsgc3RyaW5nIH0pIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoJHsgc3RyaW5nIH0pYDtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBFeHRlcm5hbFZpZXdTaWduYXR1cmVIYW5kbGVyID0ge1xyXG4gICAgICAgIGZyb20oc2VsZWN0b3I6IFNlbGVjdG9yLCAuLi5kYXRhOiBBcnJheTxEYXRhPik6IEV4dGVybmFsVmlld1NpZ25hdHVyZTtcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IEV4dGVybmFsVmlld1NpZ25hdHVyZTogRXh0ZXJuYWxWaWV3U2lnbmF0dXJlSGFuZGxlciA9ICgoKSA9PiB7XHJcbiAgICAgICAgLyoqKi8ge1xyXG4gICAgICAgICAgICByZXR1cm4geyBmcm9tIH07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZnJvbShzZWxlY3RvcjogU2VsZWN0b3IsIC4uLmRhdGE6IEFycmF5PERhdGE+KTogRXh0ZXJuYWxWaWV3U2lnbmF0dXJlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGBmdW5jdGlvbiAkeyBzZWxlY3RvciB9IGV4dGVybmFsIHZpZXcgcmV0dXJucyAoJHsgRGF0YS5zZXJpYWxpemUoLi4uZGF0YSkgfSlgO1xyXG4gICAgICAgIH1cclxuICAgIH0pKCk7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgRXh0ZXJuYWxQdXJlU2lnbmF0dXJlID0gYGZ1bmN0aW9uICR7IHN0cmluZyB9KCR7IHN0cmluZyB9KSBleHRlcm5hbCBwdXJlIHJldHVybnMgKCR7IHN0cmluZyB9KWA7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgRXh0ZXJuYWxQdXJlU2lnbmF0dXJlSGFuZGxlciA9IHtcclxuICAgICAgICBmcm9tKHNlbGVjdG9yOiBTZWxlY3RvciwgLi4uZGF0YTogQXJyYXk8RGF0YT4pOiBFeHRlcm5hbFB1cmVTaWduYXR1cmU7XHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydCBjb25zdCBFeHRlcm5hbFB1cmVTaWduYXR1cmU6IEV4dGVybmFsUHVyZVNpZ25hdHVyZUhhbmRsZXIgPSAoKCkgPT4ge1xyXG4gICAgICAgIC8qKiBAY29uc3RydWN0b3IgKi8ge1xyXG4gICAgICAgICAgICByZXR1cm4geyBmcm9tIH07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZnJvbShzZWxlY3RvcjogU2VsZWN0b3IsIC4uLmRhdGE6IEFycmF5PERhdGE+KTogRXh0ZXJuYWxQdXJlU2lnbmF0dXJlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGBmdW5jdGlvbiAkeyBzZWxlY3RvciB9IGV4dGVybmFsIHB1cmUgcmV0dXJucyAoJHsgRGF0YS5zZXJpYWxpemUoLi4uZGF0YSkgfSlgO1xyXG4gICAgICAgIH1cclxuICAgIH0pKCk7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgRXZlbnRTaWduYXR1cmUgPSBgZXZlbnQgJHsgc3RyaW5nIH0oJHsgc3RyaW5nIH0pYDtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBFdmVudFNpZ25hdHVyZUhhbmRsZXIgPSB7XHJcbiAgICAgICAgZnJvbShzZWxlY3RvcjogU2VsZWN0b3IpOiBFdmVudFNpZ25hdHVyZTtcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IEV2ZW50U2lnbmF0dXJlOiBFdmVudFNpZ25hdHVyZUhhbmRsZXIgPSAoKCkgPT4ge1xyXG4gICAgICAgIC8qKiBAY29uc3RydWN0b3IgKi8ge1xyXG4gICAgICAgICAgICByZXR1cm4geyBmcm9tIH07XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZnJvbShzZWxlY3RvcjogU2VsZWN0b3IpOiBFdmVudFNpZ25hdHVyZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgZXZlbnQgJHsgc2VsZWN0b3IgfWA7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBTZWxlY3RvciA9IGAkeyBzdHJpbmcgfSgkeyBzdHJpbmcgfSlgO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIFNlbGVjdG9ySGFuZGxlciA9IHtcclxuICAgICAgICBmcm9tKG5hbWU6IHN0cmluZywgLi4uZGF0YTogQXJyYXk8RGF0YT4pOiBTZWxlY3RvcjsgXHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydCBjb25zdCBTZWxlY3RvcjogU2VsZWN0b3JIYW5kbGVyID0gKCgpID0+IHtcclxuICAgICAgICAvKiogQGNvbnN0cnVjdG9yICovIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiBmcm9tKG5hbWU6IHN0cmluZywgLi4uZGF0YTogQXJyYXk8RGF0YT4pOiBTZWxlY3RvciB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHsgbmFtZSB9KCR7IERhdGEuc2VyaWFsaXplKC4uLmRhdGEpIH0pYDtcclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIEFycmF5RGF0YSA9IGAkeyBcclxuICAgICAgICB8IEFyaXRobWV0aWNEYXRhIFxyXG4gICAgICAgIHwgQnl0ZXNEYXRhIFxyXG4gICAgICAgIHwgQWRkcmVzc0RhdGEgXHJcbiAgICAgICAgfCBCb29sZWFuRGF0YSBcclxuICAgICAgICB8IFN0cmluZ0RhdGEgfVtdYDtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBEYXRhID1cclxuICAgICAgICB8IEFyaXRobWV0aWNEYXRhXHJcbiAgICAgICAgfCBCeXRlc0RhdGFcclxuICAgICAgICB8IEFkZHJlc3NEYXRhXHJcbiAgICAgICAgfCBCb29sZWFuRGF0YVxyXG4gICAgICAgIHwgU3RyaW5nRGF0YVxyXG4gICAgICAgIHwgQXJyYXlEYXRhXHJcbiAgICAgICAgfCBTdHJ1Y3REYXRhO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIERhdGFIYW5kbGVyID0ge1xyXG4gICAgICAgIHNlcmlhbGl6ZSguLi5kYXRhOiBBcnJheTxEYXRhPik6IHN0cmluZztcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IERhdGE6IERhdGFIYW5kbGVyID0gKCgpID0+IHtcclxuICAgICAgICAvKiogQGNvbnN0cnVjdG9yICovIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc2VyaWFsaXplIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXJpYWxpemUoLi4uZGF0YTogQXJyYXk8RGF0YT4pOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpOiBiaWdpbnQgPSAwbjsgaSA8IGRhdGEubGVuZ3RoOyBpICsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gMG4pIHJlc3VsdCA9IFwiLCBcIjtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBkYXRhW051bWJlcihpKV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIFN0cnVjdERhdGEgPSBBcnJheTxEYXRhPjtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBCb29sZWFuRGF0YSA9IFwiYm9vbFwiO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIEFkZHJlc3NEYXRhID0gXCJhZGRyZXNzXCI7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgU3RyaW5nRGF0YSA9IFwic3RyaW5nXCI7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgQnl0ZXNEYXRhID0gXCJieXRlc1wiIHwgYGJ5dGVzJHsgQnl0ZXNEYXRhQml0U2l6ZSB9YDtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBCeXRlc0RhdGFCaXRTaXplID0gXHJcbiAgICAgICAgfCBcIjFcIiB8IFwiMlwiIHwgXCIzXCIgXHJcbiAgICAgICAgfCBcIjRcIiB8IFwiNVwiIHwgXCI2XCIgXHJcbiAgICAgICAgfCBcIjdcIiB8IFwiOFwiIHwgXCI5XCIgXHJcbiAgICAgICAgfCBcIjEwXCIgfCBcIjExXCIgfCBcIjEyXCIgXHJcbiAgICAgICAgfCBcIjEzXCIgfCBcIjE0XCIgfCBcIjE1XCIgXHJcbiAgICAgICAgfCBcIjE2XCIgfCBcIjE3XCIgfCBcIjE4XCIgXHJcbiAgICAgICAgfCBcIjE5XCIgfCBcIjIwXCIgfCBcIjIxXCIgXHJcbiAgICAgICAgfCBcIjIyXCIgfCBcIjIzXCIgfCBcIjI0XCIgXHJcbiAgICAgICAgfCBcIjI1XCIgfCBcIjI2XCIgfCBcIjI3XCIgXHJcbiAgICAgICAgfCBcIjI4XCIgfCBcIjI5XCIgfCBcIjMwXCIgXHJcbiAgICAgICAgfCBcIjMxXCIgfCBcIjMyXCI7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgQXJpdGhtZXRpY0RhdGEgPSBcInVpbnRcIiB8IFwiaW50XCIgfCBgJHsgXCJ1aW50XCIgfCBcImludFwiIH0keyBBcml0aG1ldGljRGF0YUJpdFNpemUgfWA7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgQXJpdGhtZXRpY0RhdGFCaXRTaXplID0gXHJcbiAgICAgICAgfCBcIjhcIiBcclxuICAgICAgICB8IFwiMTZcIiB8IFwiMjRcIiB8IFwiMzJcIiBcclxuICAgICAgICB8IFwiNDBcIiB8IFwiNDhcIiB8IFwiNTZcIiBcclxuICAgICAgICB8IFwiNjRcIiB8IFwiNzJcIiB8IFwiODBcIiBcclxuICAgICAgICB8IFwiODhcIiB8IFwiOTZcIiBcclxuICAgICAgICB8IFwiMTA0XCIgfCBcIjExMlwiIHwgXCIxMjBcIiBcclxuICAgICAgICB8IFwiMTI4XCIgfCBcIjEzNlwiIHwgXCIxNDRcIiBcclxuICAgICAgICB8IFwiMTUyXCIgfCBcIjE2MFwiIHwgXCIxNjhcIiBcclxuICAgICAgICB8IFwiMTc2XCIgfCBcIjE4NFwiIHwgXCIxOTJcIiBcclxuICAgICAgICB8IFwiMjAwXCIgfCBcIjIwOFwiIHwgXCIyMTZcIiBcclxuICAgICAgICB8IFwiMjI0XCIgfCBcIjIzMlwiIHwgXCIyNDBcIiBcclxuICAgICAgICB8IFwiMjQ4XCIgfCBcIjI1NlwiO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIEFic3RyYWN0QmluYXJ5SW50ZXJmYWNlID0gQXJyYXk8U2lnbmF0dXJlPiB8IEFycmF5PG9iamVjdD47XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgQnl0ZWNvZGUgPSBzdHJpbmc7XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgQWRkcmVzcyA9IGAweCR7IHN0cmluZyB9YDtcclxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FDSUEsb0JBQWdDO0FBQ2hDLElBQUFBLGlCQUF1QjtBQUN2QixJQUFBQSxpQkFBeUI7QUFDekIsSUFBQUEsaUJBQWdDO0FBQ2hDLElBQUFBLGlCQUEwQjtBQUMxQixtQkFBdUI7QUFDdkIsSUFBQUMsZ0JBQXVCO0FBQ3ZCLElBQUFBLGdCQUF1QjtBQUN2QixJQUFBQSxnQkFBcUI7QUFDckIsSUFBQUEsZ0JBQXFCO0FBQ3JCLElBQUFBLGdCQUFtQjtBQUNuQixJQUFBQSxnQkFBb0I7QUFDcEIsSUFBQUEsZ0JBQW9CO0FBQ3BCLElBQUFBLGdCQUFxQjtBQUNyQixJQUFBQSxpQkFBcUI7QUFDckIsSUFBQUEsaUJBQTBCO0FBY25CLFNBQVMsdUJBQXVCLE1BQXFFO0FBQ3hHLE1BQUk7QUFFZ0I7QUFDaEIsUUFBSSxrQkFBa0UsU0FBSyxxQkFBSyxNQUFNO0FBQ2xGLGFBQU8sSUFBSSw4QkFBZ0IsSUFBSTtBQUFBLElBQ25DLENBQUMsQ0FBQztBQUNGLFFBQUksZ0JBQWdCLElBQUksRUFBRyxRQUFPO0FBQ2xDLHVCQUFtQixnQkFBZ0IsT0FBTztBQUMxQyxlQUFPLGtCQUFHLEVBQUUsT0FBTyxPQUFPLE9BQU8sQ0FBQztBQUFBLEVBQ3RDO0FBRUEsaUJBQWUsTUFBd0csYUFBbUc7QUFDdE4sUUFBSSxTQUFnRCxTQUFLLHFCQUFLLE1BQU07QUFDaEUsYUFBTyxJQUFJLHNCQUFPLFlBQVksWUFBWSxnQkFBZ0I7QUFBQSxJQUM5RCxDQUFDLENBQUM7QUFDRixRQUFJLE9BQU8s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YUFBUyxLQUFLLFVBQXVDO0FBQ2pELGFBQU8sWUFBYSxRQUFTO0FBQUEsSUFDakM7QUFBQSxFQUNKLEdBQUc7QUFRSSxFQUFNQSx3QkFBQSx5QkFBdUQsTUFBTTtBQUNoRTtBQUNGLGFBQU8sRUFBRSxLQUFLO0FBQUEsSUFDbEI7QUFFQSxhQUFTLEtBQUssYUFBdUIsTUFBMEM7QUFDM0UsYUFBTyxZQUFhLFFBQVMsMkJBQTRCQSx3QkFBQSxLQUFLLFVBQVUsR0FBRyxJQUFJLENBQUU7QUFBQSxJQUNyRjtBQUFBLEVBQ0osR0FBRztBQVFJLEVBQU1BLHdCQUFBLHlCQUF1RCxNQUFNO0FBQ2xEO0FBQ2hCLGFBQU8sRUFBRSxLQUFLO0FBQUEsSUFDbEI7QUFFQSxhQUFTLEtBQUssYUFBdUIsTUFBMEM7QUFDM0UsYUFBTyxZQUFhLFFBQVMsMkJBQTRCQSx3QkFBQSxLQUFLLFVBQVUsR0FBRyxJQUFJLENBQUU7QUFBQSxJQUNyRjtBQUFBLEVBQ0osR0FBRztBQVFJLEVBQU1BLHdCQUFBLGtCQUF5QyxNQUFNO0FBQ3BDO0FBQ2hCLGFBQU8sRUFBRSxLQUFLO0FBQUEsSUFDbEI7QUFFQSxhQUFTLEtBQUssVUFBb0M7QUFDOUMsYUFBTyxTQUFVLFFBQVM7QUFBQSxJQUM5QjtBQUFBLEVBQ0osR0FBRztBQVFJLEVBQU1BLHdCQUFBLFlBQTZCLE1BQU07QUFDeEI7QUFDaEIsYUFBTyxFQUFFLEtBQUs7QUFBQSxJQUNsQjtBQUVBLGFBQVMsS0FBSyxTQUFpQixNQUE2QjtBQUN4RCxhQUFPLEdBQUksSUFBSyxJQUFLQSx3QkFBQSxLQUFLLFVBQVUsR0FBRyxJQUFJLENBQUU7QUFBQSxJQUNqRDtBQUFBLEVBQ0osR0FBRztBQXNCSSxFQUFNQSx3QkFBQSxRQUFxQixNQUFNO0FBQ2hCO0FBQ2hCLGFBQU8sRUFBRSxVQUFVO0FBQUEsSUFDdkI7QUFFQSxhQUFTLGFBQWEsTUFBMkI7QUFDN0MsVUFBSSxTQUFpQjtBQUNyQixlQUFTLElBQVksSUFBSSxJQUFJLEtBQUssUUFBUSxLQUFNO0FBQzVDLFlBQUksTUFBTSxHQUFJLFVBQVM7QUFDdkIsa0JBQVUsS0FBSyxPQUFPLENBQUMsQ0FBQztBQUFBLE1BQzVCO0FBQ0EsYUFBTztBQUFBLElBQ1g7QUFBQSxFQUNKLEdBQUc7QUFBQSxHQTlWVTsiLAogICJuYW1lcyI6IFsiaW1wb3J0X2V0aGVycyIsICJpbXBvcnRfcmVsaXEiLCAiZSIsICJFdGhlcmV1bVZpcnR1YWxNYWNoaW5lIiwgIm5hbWUiXQp9Cg==